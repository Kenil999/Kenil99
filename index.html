<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Prompt Enhancer (Free)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0; padding: 20px;
        background: #fafafa;
        color: #222;
    }
    h2 { text-align: center; }
    .box {
        background: white;
        padding: 15px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        margin-bottom: 20px;
    }
    textarea {
        width: 100%;
        height: 130px;
        border: none;
        outline: none;
        resize: none;
        font-size: 16px;
    }
    button {
        width: 100%;
        padding: 15px;
        font-size: 18px;
        border: none;
        border-radius: 12px;
        background: black;
        color: white;
        cursor: pointer;
        transition: 0.2s ease;
    }
    button:active {
        transform: scale(0.98);
    }
    .hidden { display: none; }
</style>
</head>
<body>

<h2>AI Prompt Enhancer</h2>

<div class="box">
<textarea id="rawPrompt" placeholder="Type your raw prompt..."></textarea>
</div>

<button onclick="generateQuestions()">Refine Prompt</button>

<div id="questionsBox" class="box hidden"></div>
<div id="finalBox" class="box hidden"></div>

<script>
const ENGINEER_PROMPT = `
ROLE
You are an Expert Prompt Engineer. Your purpose is to transform any raw user input into a maximally optimized, model-ready prompt that improves clarity, correctness, reasoning quality, and creative potential without altering the user’s fundamental intent.

TASK
Refine the user’s prompt to achieve superior performance in large language models.
Your refinement must:
- Optimize the prompt for clarity, intent preservation, and effectiveness.
- Identify and resolve ambiguities or hidden assumptions.
- Suggest creative expansions when appropriate.

OUTPUT FORMAT
1. STRUCTURED OPTIMIZED PROMPT
   AI Role
   Core Task
   Constraints
   Reasoning Instructions
   Output Format

2. KEY IMPROVEMENTS (BULLET POINTS)

POSITIVE CONSTRAINTS
Preserve original intent.
Strengthen logical structure.
Expand creatively without distorting meaning.

NEGATIVE CONSTRAINTS
Do NOT invent facts.
Do NOT hallucinate missing context.
Do NOT use unnecessary jargon.

FINAL ACTION
Start by generating 3 clarifying questions.
`;

async function callAI(messages) {
    const response = await fetch("https://api.deepseek.com/chat/completions", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            model: "deepseek-chat",
            messages: messages
        })
    });

    const data = await response.json();
    return data.choices[0].message.content;
}

async function generateQuestions() {
    const raw = document.getElementById("rawPrompt").value.trim();
    if (!raw) return;

    document.getElementById("questionsBox").classList.remove("hidden");
    document.getElementById("questionsBox").innerHTML = "Thinking...";

    const questions = await callAI([
        { role: "system", content: ENGINEER_PROMPT },
        { role: "user", content: raw }
    ]);

    document.getElementById("questionsBox").innerHTML =
        `<strong>Clarification Questions:</strong><br><br>${questions.replace(/\n/g,'<br>')}`;

    generateFinal(raw, questions);
}

async function generateFinal(raw, questions) {
    document.getElementById("finalBox").classList.remove("hidden");
    document.getElementById("finalBox").innerHTML = "Optimizing...";

    const finalPrompt = await callAI([
        { role: "system", content: ENGINEER_PROMPT },
        { role: "user", content: `RAW PROMPT:\n${raw}\n\nCLARIFICATION QUESTIONS:\n${questions}\n\nNow produce the final optimized output.` }
    ]);

    document.getElementById("finalBox").innerHTML =
        `<strong>Optimized Prompt:</strong><br><br>${finalPrompt.replace(/\n/g,'<br>')}`;
}
</script>

</body>
</html>
